import{d as S,r as C,f as u,o as l,j as d,K as I,n,C as k,a as $,E as V,F as z,m as f,u as a,y as q,p as w}from"./vue.esm-bundler-CKZLKMJN.js";import{N as P}from"./UserInfo-D9vbHoN0.js";import{N as b,_ as x}from"./Option-DGwcywGk.js";import{u as E}from"./useI18n-BYVGpRei.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const c=S({__name:"UserSelect",props:{users:{default:()=>[]},modelValue:{default:""},ignoreIds:{default:()=>[]},currentUserId:{default:""},placeholder:{},size:{}},emits:["blur","focus"],setup(p,{emit:N}){const o=p,i=N,{t:m}=E(),r=C(""),y=u(()=>o.users.filter(e=>e.isPendingUser||!e.email||o.ignoreIds.includes(e.id)?!1:e.fullName&&e.fullName.toLowerCase().includes(r.value.toLowerCase())?!0:e.email.includes(r.value))),g=u(()=>[...y.value].sort((e,s)=>{if(e.lastName&&s.lastName&&e.lastName!==s.lastName)return e.lastName>s.lastName?1:-1;if(e.firstName&&s.firstName&&e.firstName!==s.firstName)return e.firstName>s.firstName?1:-1;if(!e.email||!s.email)throw new Error("Expected all users to have email");return e.email>s.email?1:-1})),v=e=>{r.value=e},h=()=>i("blur"),U=()=>i("focus"),_=e=>e.fullName?`${e.fullName} (${e.email})`:e.email;return(e,s)=>(l(),d(a(b),f({"data-test-id":"user-select-trigger"},e.$attrs,{"model-value":e.modelValue,filterable:!0,"filter-method":v,placeholder:e.placeholder||a(m)("nds.userSelect.selectUser"),"default-first-option":!0,teleported:"","popper-class":e.$style.limitPopperWidth,"no-data-text":a(m)("nds.userSelect.noMatchingUsers"),size:e.size,onBlur:h,onFocus:U}),I({default:n(()=>[(l(!0),$(z,null,V(g.value,t=>(l(),d(a(x),{key:t.id,value:t.id,class:q(e.$style.itemContainer),label:_(t),disabled:t.disabled},{default:n(()=>[w(a(P),f(t,{"is-current-user":e.currentUserId===t.id}),null,16,["is-current-user"])]),_:2},1032,["value","class","label","disabled"]))),128))]),_:2},[e.$slots.prefix?{name:"prefix",fn:n(()=>[k(e.$slots,"prefix")]),key:"0"}:void 0]),1040,["model-value","placeholder","popper-class","no-data-text","size"]))}}),B="_itemContainer_6ofyv_1",L="_limitPopperWidth_6ofyv_6",W={itemContainer:B,limitPopperWidth:L},M={$style:W},H=F(c,[["__cssModules",M]]);c.__docgenInfo={exportName:"default",displayName:"UserSelect",description:"",tags:{},props:[{name:"users",required:!1,type:{name:"Array",elements:[{name:"IUser"}]},defaultValue:{func:!1,value:"() => []"}},{name:"modelValue",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"ignoreIds",required:!1,type:{name:"Array",elements:[{name:"string"}]},defaultValue:{func:!1,value:"() => []"}},{name:"currentUserId",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"size",required:!1,type:{name:"Exclude",elements:[{name:"SelectSize"},{name:'"xlarge"'}]}}],events:[{name:"blur"},{name:"focus"}],slots:[{name:"prefix"}],sourceFiles:["/home/runner/work/n8n-storybook/n8n-storybook/packages/design-system/src/components/N8nUserSelect/UserSelect.vue"]};export{H as N};
