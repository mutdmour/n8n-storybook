import{a1 as $e,d as A,r as y,e as h,f as _,W,a3 as Te,t as Y,u as S,w as ce,C as B,H as w,o as D,j as U,n as m,p as F,q as Fe,s as ke,M as Re,X as Se,a as j,K as Oe,m as V,y as Q,B as Z,V as pe,b as Pe,J as De,I as x,F as Ne,A as Be}from"./vue.esm-bundler-CKZLKMJN.js";import{E as fe}from"./index-CtRVoKFK.js";import{f as O,b as M,E as Ke,O as Le,w as ie,F as Me}from"./index-sSNy8MTe.js";import{E as Ae}from"./index-BJ5l3qGL.js";import{E as me}from"./index-D_I6V5Px.js";import{e as Ge}from"./index-7glOe3YB.js";import{c as ze,E as Ue,d as He,a as ve,C as Ye,b as Ve,e as Je,f as We,g as je,F as qe,L as Xe}from"./dropdown-DgpGeiLd.js";import{b as Qe,d as X,_ as G,u as ee,w as Ze,g as ge}from"./plugin-vue_export-helper-DmnD37aS.js";import{j as xe,u as we}from"./constants-B8P1jKxi.js";import{u as eo}from"./index-_O1BgD2M.js";import{a as oo}from"./style-BBe7QGW1.js";import{u as no}from"./use-form-common-props-BTlxgw_X.js";import{f as to}from"./_baseGet-CJvEpbeR.js";function ro(){if(!arguments.length)return[];var e=arguments[0];return to(e)?e:[e]}const be=(...e)=>o=>{e.forEach(i=>{$e(i)?i(o):i.value=o})},lo=Qe({style:{type:X([String,Array,Object])},currentTabId:{type:X(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:X(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:so,ElCollectionItem:ao,COLLECTION_INJECTION_KEY:oe,COLLECTION_ITEM_INJECTION_KEY:io}=ze("RovingFocusGroup"),ne=Symbol("elRovingFocusGroup"),Ie=Symbol("elRovingFocusGroupItem"),uo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},co=(e,o)=>e,po=(e,o,i)=>{const l=co(e.key);return uo[l]},fo=(e,o)=>e.map((i,l)=>e[(l+o)%e.length]),te=e=>{const{activeElement:o}=document;for(const i of e)if(i===o||(i.focus(),o!==document.activeElement))return},ue="currentTabIdChange",de="rovingFocusGroup.entryFocus",mo={bubbles:!1,cancelable:!0},vo=A({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:lo,emits:[ue,"entryFocus"],setup(e,{emit:o}){var i;const l=y((i=e.currentTabId||e.defaultCurrentTabId)!=null?i:null),c=y(!1),d=y(!1),s=y(null),{getItems:r}=h(oe,void 0),p=_(()=>[{outline:"none"},e.style]),v=a=>{o(ue,a)},g=()=>{c.value=!0},b=O(a=>{var f;(f=e.onMousedown)==null||f.call(e,a)},()=>{d.value=!0}),E=O(a=>{var f;(f=e.onFocus)==null||f.call(e,a)},a=>{const f=!S(d),{target:N,currentTarget:k}=a;if(N===k&&f&&!S(c)){const K=new Event(de,mo);if(k==null||k.dispatchEvent(K),!K.defaultPrevented){const I=r().filter(T=>T.focusable),C=I.find(T=>T.active),$=I.find(T=>T.id===S(l)),L=[C,$,...I].filter(Boolean).map(T=>T.ref);te(L)}}d.value=!1}),n=O(a=>{var f;(f=e.onBlur)==null||f.call(e,a)},()=>{c.value=!1}),u=(...a)=>{o("entryFocus",...a)};W(ne,{currentTabbedId:Te(l),loop:Y(e,"loop"),tabIndex:_(()=>S(c)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:p,orientation:Y(e,"orientation"),dir:Y(e,"dir"),onItemFocus:v,onItemShiftTab:g,onBlur:n,onFocus:E,onMousedown:b}),ce(()=>e.currentTabId,a=>{l.value=a??null}),xe(s,de,u)}});function go(e,o,i,l,c,d){return B(e.$slots,"default")}var wo=G(vo,[["render",go],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const bo=A({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:so,ElRovingFocusGroupImpl:wo}});function Io(e,o,i,l,c,d){const s=w("el-roving-focus-group-impl"),r=w("el-focus-group-collection");return D(),U(r,null,{default:m(()=>[F(s,Fe(ke(e.$attrs)),{default:m(()=>[B(e.$slots,"default")]),_:3},16)]),_:3})}var Eo=G(bo,[["render",Io],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const ho=A({components:{ElRovingFocusCollectionItem:ao},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:i,loop:l,onItemFocus:c,onItemShiftTab:d}=h(ne,void 0),{getItems:s}=h(oe,void 0),r=we(),p=y(null),v=O(n=>{o("mousedown",n)},n=>{e.focusable?c(S(r)):n.preventDefault()}),g=O(n=>{o("focus",n)},()=>{c(S(r))}),b=O(n=>{o("keydown",n)},n=>{const{key:u,shiftKey:a,target:f,currentTarget:N}=n;if(u===M.tab&&a){d();return}if(f!==N)return;const k=po(n);if(k){n.preventDefault();let I=s().filter(C=>C.focusable).map(C=>C.ref);switch(k){case"last":{I.reverse();break}case"prev":case"next":{k==="prev"&&I.reverse();const C=I.indexOf(N);I=l.value?fo(I,C+1):I.slice(C+1);break}}Re(()=>{te(I)})}}),E=_(()=>i.value===S(r));return W(Ie,{rovingFocusGroupItemRef:p,tabIndex:_(()=>S(E)?0:-1),handleMousedown:v,handleFocus:g,handleKeydown:b}),{id:r,handleKeydown:b,handleFocus:g,handleMousedown:v}}});function _o(e,o,i,l,c,d){const s=w("el-roving-focus-collection-item");return D(),U(s,{id:e.id,focusable:e.focusable,active:e.active},{default:m(()=>[B(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Co=G(ho,[["render",_o],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const q=Symbol("elDropdown"),{ButtonGroup:yo}=fe,$o=A({name:"ElDropdown",components:{ElButton:fe,ElButtonGroup:yo,ElScrollbar:Ae,ElDropdownCollection:Ue,ElTooltip:Ke,ElRovingFocusGroup:Eo,ElOnlyChild:Le,ElIcon:me,ArrowDown:Ge},props:He,emits:["visible-change","click","command"],setup(e,{emit:o}){const i=pe(),l=ee("dropdown"),{t:c}=eo(),d=y(),s=y(),r=y(null),p=y(null),v=y(null),g=y(null),b=y(!1),E=[M.enter,M.space,M.down],n=_(()=>({maxHeight:oo(e.maxHeight)})),u=_(()=>[l.m(C.value)]),a=_(()=>ro(e.trigger)),f=we().value,N=_(()=>e.id||f);ce([d,a],([t,R],[z])=>{var le,se,ae;(le=z==null?void 0:z.$el)!=null&&le.removeEventListener&&z.$el.removeEventListener("pointerenter",P),(se=t==null?void 0:t.$el)!=null&&se.removeEventListener&&t.$el.removeEventListener("pointerenter",P),(ae=t==null?void 0:t.$el)!=null&&ae.addEventListener&&R.includes("hover")&&t.$el.addEventListener("pointerenter",P)},{immediate:!0}),Se(()=>{var t,R;(R=(t=d.value)==null?void 0:t.$el)!=null&&R.removeEventListener&&d.value.$el.removeEventListener("pointerenter",P)});function k(){K()}function K(){var t;(t=r.value)==null||t.onClose()}function I(){var t;(t=r.value)==null||t.onOpen()}const C=no();function $(...t){o("command",...t)}function P(){var t,R;(R=(t=d.value)==null?void 0:t.$el)==null||R.focus()}function L(){}function T(){const t=S(p);a.value.includes("hover")&&(t==null||t.focus()),g.value=null}function re(t){g.value=t}function J(t){b.value||(t.preventDefault(),t.stopImmediatePropagation())}function H(){o("visible-change",!0)}function Ce(t){(t==null?void 0:t.type)==="keydown"&&p.value.focus()}function ye(){o("visible-change",!1)}return W(q,{contentRef:p,role:_(()=>e.role),triggerId:N,isUsingKeyboard:b,onItemEnter:L,onItemLeave:T}),W("elDropdown",{instance:i,dropdownSize:C,handleClick:k,commandHandler:$,trigger:Y(e,"trigger"),hideOnClick:Y(e,"hideOnClick")}),{t:c,ns:l,scrollbar:v,wrapStyle:n,dropdownTriggerKls:u,dropdownSize:C,triggerId:N,triggerKeys:E,currentTabId:g,handleCurrentTabIdChange:re,handlerMainButtonClick:t=>{o("click",t)},handleEntryFocus:J,handleClose:K,handleOpen:I,handleBeforeShowTooltip:H,handleShowTooltip:Ce,handleBeforeHideTooltip:ye,onFocusAfterTrapped:t=>{var R,z;t.preventDefault(),(z=(R=p.value)==null?void 0:R.focus)==null||z.call(R,{preventScroll:!0})},popperRef:r,contentRef:p,triggeringElementRef:d,referenceElementRef:s}}});function To(e,o,i,l,c,d){var s;const r=w("el-dropdown-collection"),p=w("el-roving-focus-group"),v=w("el-scrollbar"),g=w("el-only-child"),b=w("el-tooltip"),E=w("el-button"),n=w("arrow-down"),u=w("el-icon"),a=w("el-button-group");return D(),j("div",{class:Q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[F(b,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(s=e.referenceElementRef)==null?void 0:s.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Oe({content:m(()=>[F(v,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:m(()=>[F(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:m(()=>[F(r,null,{default:m(()=>[B(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:m(()=>[F(g,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:m(()=>[B(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(D(),U(a,{key:0},{default:m(()=>[F(E,V({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:m(()=>[B(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),F(E,V({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:m(()=>[F(u,{class:Q(e.ns.e("icon"))},{default:m(()=>[F(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Z("v-if",!0)],2)}var Fo=G($o,[["render",To],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const ko=A({name:"DropdownItemImpl",components:{ElIcon:me},props:ve,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const i=ee("dropdown"),{role:l}=h(q,void 0),{collectionItemRef:c}=h(Ye,void 0),{collectionItemRef:d}=h(io,void 0),{rovingFocusGroupItemRef:s,tabIndex:r,handleFocus:p,handleKeydown:v,handleMousedown:g}=h(Ie,void 0),b=be(c,d,s),E=_(()=>l.value==="menu"?"menuitem":l.value==="navigation"?"link":"button"),n=O(u=>{const{code:a}=u;if(a===M.enter||a===M.space)return u.preventDefault(),u.stopImmediatePropagation(),o("clickimpl",u),!0},v);return{ns:i,itemRef:b,dataset:{[Ve]:""},role:E,tabIndex:r,handleFocus:p,handleKeydown:n,handleMousedown:g}}}),Ro=["aria-disabled","tabindex","role"];function So(e,o,i,l,c,d){const s=w("el-icon");return D(),j(Ne,null,[e.divided?(D(),j("li",V({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):Z("v-if",!0),Pe("li",V({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=r=>e.$emit("clickimpl",r)),onFocus:o[1]||(o[1]=(...r)=>e.handleFocus&&e.handleFocus(...r)),onKeydown:o[2]||(o[2]=x((...r)=>e.handleKeydown&&e.handleKeydown(...r),["self"])),onMousedown:o[3]||(o[3]=(...r)=>e.handleMousedown&&e.handleMousedown(...r)),onPointermove:o[4]||(o[4]=r=>e.$emit("pointermove",r)),onPointerleave:o[5]||(o[5]=r=>e.$emit("pointerleave",r))}),[e.icon?(D(),U(s,{key:0},{default:m(()=>[(D(),U(De(e.icon)))]),_:1})):Z("v-if",!0),B(e.$slots,"default")],16,Ro)],64)}var Oo=G(ko,[["render",So],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ee=()=>{const e=h("elDropdown",{}),o=_(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Po=A({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Je,ElRovingFocusItem:Co,ElDropdownItemImpl:Oo},inheritAttrs:!1,props:ve,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:i}){const{elDropdown:l}=Ee(),c=pe(),d=y(null),s=_(()=>{var n,u;return(u=(n=S(d))==null?void 0:n.textContent)!=null?u:""}),{onItemEnter:r,onItemLeave:p}=h(q,void 0),v=O(n=>(o("pointermove",n),n.defaultPrevented),ie(n=>{if(e.disabled){p(n);return}const u=n.currentTarget;u===document.activeElement||u.contains(document.activeElement)||(r(n),n.defaultPrevented||u==null||u.focus())})),g=O(n=>(o("pointerleave",n),n.defaultPrevented),ie(n=>{p(n)})),b=O(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var u,a,f;if(e.disabled){n.stopImmediatePropagation();return}(u=l==null?void 0:l.hideOnClick)!=null&&u.value&&((a=l.handleClick)==null||a.call(l)),(f=l.commandHandler)==null||f.call(l,e.command,c,n)}),E=_(()=>({...e,...i}));return{handleClick:b,handlePointerMove:v,handlePointerLeave:g,textContent:s,propsAndAttrs:E}}});function Do(e,o,i,l,c,d){var s;const r=w("el-dropdown-item-impl"),p=w("el-roving-focus-item"),v=w("el-dropdown-collection-item");return D(),U(v,{disabled:e.disabled,"text-value":(s=e.textValue)!=null?s:e.textContent},{default:m(()=>[F(p,{focusable:!e.disabled},{default:m(()=>[F(r,V(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:m(()=>[B(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var he=G(Po,[["render",Do],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const No=A({name:"ElDropdownMenu",props:We,setup(e){const o=ee("dropdown"),{_elDropdownSize:i}=Ee(),l=i.value,{focusTrapRef:c,onKeydown:d}=h(Me,void 0),{contentRef:s,role:r,triggerId:p}=h(q,void 0),{collectionRef:v,getItems:g}=h(je,void 0),{rovingFocusGroupRef:b,rovingFocusGroupRootStyle:E,tabIndex:n,onBlur:u,onFocus:a,onMousedown:f}=h(ne,void 0),{collectionRef:N}=h(oe,void 0),k=_(()=>[o.b("menu"),o.bm("menu",l==null?void 0:l.value)]),K=be(s,v,c,b,N),I=O($=>{var P;(P=e.onKeydown)==null||P.call(e,$)},$=>{const{currentTarget:P,code:L,target:T}=$;if(P.contains(T),M.tab===L&&$.stopImmediatePropagation(),$.preventDefault(),T!==S(s)||!qe.includes(L))return;const J=g().filter(H=>!H.disabled).map(H=>H.ref);Xe.includes(L)&&J.reverse(),te(J)});return{size:l,rovingFocusGroupRootStyle:E,tabIndex:n,dropdownKls:k,role:r,triggerId:p,dropdownListWrapperRef:K,handleKeydown:$=>{I($),d($)},onBlur:u,onFocus:a,onMousedown:f}}}),Bo=["role","aria-labelledby"];function Ko(e,o,i,l,c,d){return D(),j("ul",{ref:e.dropdownListWrapperRef,class:Q(e.dropdownKls),style:Be(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...s)=>e.onBlur&&e.onBlur(...s)),onFocus:o[1]||(o[1]=(...s)=>e.onFocus&&e.onFocus(...s)),onKeydown:o[2]||(o[2]=x((...s)=>e.handleKeydown&&e.handleKeydown(...s),["self"])),onMousedown:o[3]||(o[3]=x((...s)=>e.onMousedown&&e.onMousedown(...s),["self"]))},[B(e.$slots,"default")],46,Bo)}var _e=G(No,[["render",Ko],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Zo=Ze(Fo,{DropdownItem:he,DropdownMenu:_e}),xo=ge(he),en=ge(_e);export{en as E,Zo as a,xo as b,ro as c,be as d};
