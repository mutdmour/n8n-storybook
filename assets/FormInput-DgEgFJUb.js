import{i as K,d as W,f as y,r as z,w as L,g as ee,o as r,a as C,b as q,u as n,y as v,Q as ae,j as d,n as g,J as R,B as h,z as w,p as te,A as j,I as le,M as ie,a8 as J,V as se,a0 as ue,a9 as de,D as Y,C as me,E as ce,F as pe,H as fe}from"./vue.esm-bundler-CKZLKMJN.js";import{N as ve}from"./Input-C8h2vlZL.js";import{N as ye,_ as be}from"./Option-DGwcywGk.js";import{N as x}from"./InputLabel-D7tsELlc.js";import{N as he}from"./Checkbox-WyBboY0p.js";import{t as ge}from"./index-BDe0Wd28.js";import{E as N}from"./index-D_I6V5Px.js";import{l as Ie}from"./index-7glOe3YB.js";import{b as Ve,d as Ce,u as Se,_ as Te,w as ke}from"./plugin-vue_export-helper-DmnD37aS.js";import{i as we}from"./index-D72nbeKo.js";import{i as O}from"./icon-CEt9g7ic.js";import{U as _,C as $,I as G}from"./event-BB_Ol6Sd.js";import{h as D,i as F}from"./constants-B8P1jKxi.js";import{u as Ee,a as Ne}from"./use-form-item-DhSYu2FI.js";import{u as qe,b as Re}from"./use-form-common-props-BTlxgw_X.js";import{u as Ae}from"./index-CMauXUsi.js";import{a as Be}from"./style-BBe7QGW1.js";import{d as Pe,t as Ue}from"./error-Cq9Fpw4b.js";import{_ as Oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ze=Ve({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:we},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:O},activeActionIcon:{type:O},activeIcon:{type:O},inactiveIcon:{type:O},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Ce(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:void 0}}),Le={[_]:t=>D(t)||K(t)||F(t),[$]:t=>D(t)||K(t)||F(t),[G]:t=>D(t)||K(t)||F(t)},De=["onClick"],Me=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Ke=["aria-hidden"],Fe=["aria-hidden"],_e=["aria-hidden"],H="ElSwitch",$e=W({name:H}),Ge=W({...$e,props:ze,emits:Le,setup(t,{expose:s,emit:u}){const l=t,p=se(),{formItem:m}=Ee(),I=qe(),o=Se("switch");(a=>{a.forEach(c=>{Ae({from:c[0],replacement:c[1],scope:H,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},y(()=>{var U;return!!((U=p.vnode.props)!=null&&U[c[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:B}=Ne(l,{formItemContext:m}),S=Re(y(()=>l.loading)),T=z(l.modelValue!==!1),k=z(),E=z(),M=y(()=>[o.b(),o.m(I.value),o.is("disabled",S.value),o.is("checked",i.value)]),P=y(()=>[o.e("label"),o.em("label","left"),o.is("active",!i.value)]),e=y(()=>[o.e("label"),o.em("label","right"),o.is("active",i.value)]),b=y(()=>({width:Be(l.width)}));L(()=>l.modelValue,()=>{T.value=!0}),L(()=>l.value,()=>{T.value=!1});const f=y(()=>T.value?l.modelValue:l.value),i=y(()=>f.value===l.activeValue);[l.activeValue,l.inactiveValue].includes(f.value)||(u(_,l.inactiveValue),u($,l.inactiveValue),u(G,l.inactiveValue)),L(i,a=>{var c;k.value.checked=a,l.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(U=>Pe()))});const V=()=>{const a=i.value?l.inactiveValue:l.activeValue;u(_,a),u($,a),u(G,a),ie(()=>{k.value.checked=i.value})},X=()=>{if(S.value)return;const{beforeChange:a}=l;if(!a){V();return}const c=a();[J(c),D(c)].includes(!0)||Ue(H,"beforeChange must return type `Promise<boolean>` or `boolean`"),J(c)?c.then(Z=>{Z&&V()}).catch(Z=>{}):c&&V()},oe=y(()=>o.cssVarBlock({...l.activeColor?{"on-color":l.activeColor}:null,...l.inactiveColor?{"off-color":l.inactiveColor}:null,...l.borderColor?{"border-color":l.borderColor}:null})),re=()=>{var a,c;(c=(a=k.value)==null?void 0:a.focus)==null||c.call(a)};return ee(()=>{k.value.checked=i.value}),s({focus:re,checked:i}),(a,c)=>(r(),C("div",{class:v(n(M)),style:j(n(oe)),onClick:le(X,["prevent"])},[q("input",{id:n(B),ref_key:"input",ref:k,class:v(n(o).e("input")),type:"checkbox",role:"switch","aria-checked":n(i),"aria-disabled":n(S),"aria-label":a.label,name:a.name,"true-value":a.activeValue,"false-value":a.inactiveValue,disabled:n(S),tabindex:a.tabindex,onChange:V,onKeydown:ae(X,["enter"])},null,42,Me),!a.inlinePrompt&&(a.inactiveIcon||a.inactiveText)?(r(),C("span",{key:0,class:v(n(P))},[a.inactiveIcon?(r(),d(n(N),{key:0},{default:g(()=>[(r(),d(R(a.inactiveIcon)))]),_:1})):h("v-if",!0),!a.inactiveIcon&&a.inactiveText?(r(),C("span",{key:1,"aria-hidden":n(i)},w(a.inactiveText),9,Ke)):h("v-if",!0)],2)):h("v-if",!0),q("span",{ref_key:"core",ref:E,class:v(n(o).e("core")),style:j(n(b))},[a.inlinePrompt?(r(),C("div",{key:0,class:v(n(o).e("inner"))},[a.activeIcon||a.inactiveIcon?(r(),d(n(N),{key:0,class:v(n(o).is("icon"))},{default:g(()=>[(r(),d(R(n(i)?a.activeIcon:a.inactiveIcon)))]),_:1},8,["class"])):a.activeText||a.inactiveText?(r(),C("span",{key:1,class:v(n(o).is("text")),"aria-hidden":!n(i)},w(n(i)?a.activeText:a.inactiveText),11,Fe)):h("v-if",!0)],2)):h("v-if",!0),q("div",{class:v(n(o).e("action"))},[a.loading?(r(),d(n(N),{key:0,class:v(n(o).is("loading"))},{default:g(()=>[te(n(Ie))]),_:1},8,["class"])):a.activeActionIcon&&n(i)?(r(),d(n(N),{key:1},{default:g(()=>[(r(),d(R(a.activeActionIcon)))]),_:1})):a.inactiveActionIcon&&!n(i)?(r(),d(n(N),{key:2},{default:g(()=>[(r(),d(R(a.inactiveActionIcon)))]),_:1})):h("v-if",!0)],2)],6),!a.inlinePrompt&&(a.activeIcon||a.activeText)?(r(),C("span",{key:1,class:v(n(e))},[a.activeIcon?(r(),d(n(N),{key:0},{default:g(()=>[(r(),d(R(a.activeIcon)))]),_:1})):h("v-if",!0),!a.activeIcon&&a.activeText?(r(),C("span",{key:1,"aria-hidden":!n(i)},w(a.activeText),9,_e)):h("v-if",!0)],2)):h("v-if",!0)],14,De))}});var He=Te(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const We=ke(He),Qe=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Xe={validate:t=>typeof t=="string"&&t.trim()||typeof t=="number"||typeof t=="boolean"?!1:{messageKey:"formInput.validator.fieldRequired"}},Ze={validate:(t,s)=>typeof t=="string"&&t.length<s.minimum?{messageKey:"formInput.validator.minCharactersRequired",options:s}:!1},je={validate:(t,s)=>typeof t=="string"&&t.length>s.maximum?{messageKey:"formInput.validator.maxCharactersRequired",options:s}:!1},Je={validate:(t,s)=>typeof t!="string"?!1:(t.match(/\d/g)||[]).length<s.minimum?{messageKey:"formInput.validator.numbersRequired",options:s}:!1},Ye={validate:t=>Qe.test(String(t).trim().toLowerCase())?!1:{messageKey:"formInput.validator.validEmailRequired"}},xe={validate:(t,s)=>typeof t!="string"?!1:(t.match(/[A-Z]/g)||[]).length<s.minimum?{messageKey:"formInput.validator.uppercaseCharsRequired",options:s}:!1},ea={validate:(t,s)=>s.regex.test(`${t}`)?!1:{message:s.message,options:s}},aa={rules:[{rules:[{name:"MIN_LENGTH",config:{minimum:8}},{name:"CONTAINS_NUMBER",config:{minimum:1}},{name:"CONTAINS_UPPERCASE",config:{minimum:1}}],defaultError:{messageKey:"formInput.validator.defaultPasswordRequirements"}},{name:"MAX_LENGTH",config:{maximum:64}}]},ta={REQUIRED:Xe,MIN_LENGTH:Ze,MAX_LENGTH:je,CONTAINS_NUMBER:Je,VALID_EMAIL:Ye,CONTAINS_UPPERCASE:xe,DEFAULT_PASSWORD_RULES:aa,MATCH_REGEX:ea},A=(t,s,u,l)=>{if(u.hasOwnProperty("rules")){const p=u.rules;for(let m=0;m<p.length;m++){if(p[m].hasOwnProperty("rules")){const I=A(t,s,p[m],l);if(I)return I}if(p[m].hasOwnProperty("name")){const I=p[m];if(!s[I.name])continue;const o=A(t,s,s[I.name],I.config);if(o&&"defaultError"in u&&u.defaultError)return u.defaultError;if(o)return o}}}else if(u.hasOwnProperty("validate"))return u.validate(t,l);return!1},la=["textContent"],na=["textContent"],ne=W({__name:"FormInput",props:{modelValue:{type:[String,Number,Boolean,null]},label:{},infoText:{},required:{type:Boolean},showRequiredAsterisk:{type:Boolean,default:!0},type:{default:"text"},placeholder:{},tooltipText:{},showValidationWarnings:{type:Boolean},validateOnBlur:{type:Boolean,default:!0},documentationUrl:{},documentationText:{default:"Open docs"},validationRules:{},validators:{},maxlength:{},options:{},autocomplete:{},name:{},focusInitially:{type:Boolean},labelSize:{default:"medium"},disabled:{type:Boolean},activeLabel:{},activeColor:{},inactiveLabel:{},inactiveColor:{},teleported:{type:Boolean,default:!0},tagSize:{default:"small"}},emits:["validate","update:modelValue","focus","blur","enter"],setup(t,{expose:s,emit:u}){const l=t,p=u,m=ue({hasBlurred:!1,isTyping:!1}),I=de(),o=z(null);function Q(){const e=l.validationRules||[],b={...ta,...l.validators||{}};if(l.required){const f=A(l.modelValue,b,b.REQUIRED);if(f)return f}for(let f=0;f<e.length;f++){if(e[f].hasOwnProperty("name")){const i=e[f];if(b[i.name]){const V=A(l.modelValue,b,b[i.name],i.config);if(V)return V}}if(e[f].hasOwnProperty("rules")){const i=e[f],V=A(l.modelValue,b,i);if(V)return V}}return null}function B(){m.hasBlurred=!0,m.isTyping=!1,p("blur")}function S(e){m.isTyping=!0,p("update:modelValue",e)}function T(){p("focus")}function k(e){e.stopPropagation(),e.preventDefault(),p("enter")}const E=y(()=>{const e=Q();if(e){if("messageKey"in e)return ge(e.messageKey,e.options);if("message"in e)return e.message}return null}),M=y(()=>!!I.default),P=y(()=>!!E.value&&(l.validateOnBlur&&m.hasBlurred&&!m.isTyping||l.showValidationWarnings));return ee(()=>{p("validate",!E.value),l.focusInitially&&o.value&&o.value.focus()}),L(()=>E.value,e=>p("validate",!e)),s({inputRef:o}),(e,b)=>{const f=fe("n8n-link");return e.type==="checkbox"?(r(),d(n(he),{key:0,ref_key:"inputRef",ref:o,label:e.label,disabled:e.disabled,"label-size":e.labelSize,"model-value":e.modelValue,"onUpdate:modelValue":S,onFocus:T},null,8,["label","disabled","label-size","model-value"])):e.type==="toggle"?(r(),d(n(x),{key:1,"input-name":e.name,label:e.label,"tooltip-text":e.tooltipText,required:e.required&&e.showRequiredAsterisk},{content:g(()=>[Y(w(e.tooltipText),1)]),default:g(()=>[te(n(We),{"model-value":e.modelValue,"active-color":e.activeColor,"inactive-color":e.inactiveColor,"onUpdate:modelValue":S},null,8,["model-value","active-color","inactive-color"])]),_:1},8,["input-name","label","tooltip-text","required"])):(r(),d(n(x),{key:2,"input-name":e.name,label:e.label,"tooltip-text":e.tooltipText,required:e.required&&e.showRequiredAsterisk},{default:g(()=>[q("div",{class:v(P.value?e.$style.errorInput:""),onKeydown:[b[0]||(b[0]=le(()=>{},["stop"])),ae(k,["enter"])]},[M.value?me(e.$slots,"default",{key:0}):e.type==="select"||e.type==="multi-select"?(r(),d(n(ye),{key:1,ref_key:"inputRef",ref:o,class:v({[e.$style.multiSelectSmallTags]:e.tagSize==="small"}),"model-value":e.modelValue,placeholder:e.placeholder,multiple:e.type==="multi-select",disabled:e.disabled,name:e.name,teleported:e.teleported,"onUpdate:modelValue":S,onFocus:T,onBlur:B},{default:g(()=>[(r(!0),C(pe,null,ce(e.options||[],i=>(r(),d(n(be),{key:i.value,value:i.value,label:i.label,disabled:!!i.disabled,size:"small"},null,8,["value","label","disabled"]))),128))]),_:1},8,["class","model-value","placeholder","multiple","disabled","name","teleported"])):(r(),d(n(ve),{key:2,ref_key:"inputRef",ref:o,name:e.name,type:e.type,placeholder:e.placeholder,"model-value":e.modelValue,maxlength:e.maxlength,autocomplete:e.autocomplete,disabled:e.disabled,"onUpdate:modelValue":S,onBlur:B,onFocus:T},null,8,["name","type","placeholder","model-value","maxlength","autocomplete","disabled"]))],34),P.value?(r(),C("div",{key:0,class:v(e.$style.errors)},[q("span",{textContent:w(E.value)},null,8,la),e.documentationUrl&&e.documentationText?(r(),d(f,{key:0,to:e.documentationUrl,"new-window":!0,size:"small",theme:"danger"},{default:g(()=>[Y(w(e.documentationText),1)]),_:1},8,["to"])):h("",!0)],2)):e.infoText?(r(),C("div",{key:1,class:v(e.$style.infoText)},[q("span",{size:"small",textContent:w(e.infoText)},null,8,na)],2)):h("",!0)]),_:3},8,["input-name","label","tooltip-text","required"]))}}}),oa="_infoText_1ls5d_1",ra="_errors_1ls5d_8 _infoText_1ls5d_1",ia="_errorInput_1ls5d_13",sa="_multiSelectSmallTags_1ls5d_17",ua={infoText:oa,errors:ra,errorInput:ia,multiSelectSmallTags:sa},da={$style:ua},Ra=Oe(ne,[["__cssModules",da]]);ne.__docgenInfo={exportName:"default",displayName:"FormInput",description:"",tags:{},expose:[{name:"inputRef"}],props:[{name:"modelValue",required:!0,type:{name:"Validatable"}},{name:"label",required:!0,type:{name:"string"}},{name:"infoText",required:!1,type:{name:"string"}},{name:"required",required:!1,type:{name:"boolean"}},{name:"showRequiredAsterisk",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"type",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'text'"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"tooltipText",required:!1,type:{name:"string"}},{name:"showValidationWarnings",required:!1,type:{name:"boolean"}},{name:"validateOnBlur",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"documentationUrl",required:!1,type:{name:"string"}},{name:"documentationText",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Open docs'"}},{name:"validationRules",required:!1,type:{name:"Array",elements:[{name:"union",elements:[{name:"Rule"},{name:"RuleGroup"}]}]}},{name:"validators",required:!1,type:{name:"{ [key: string]: IValidator | RuleGroup }"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"options",required:!1,type:{name:"Array",elements:[{name:"{ value: string | number; label: string; disabled?: boolean }"}]}},{name:"autocomplete",required:!1,type:{name:"InputAutocompletePropType"}},{name:"name",required:!1,type:{name:"string"}},{name:"focusInitially",required:!1,type:{name:"boolean"}},{name:"labelSize",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'},{name:'"large"'}]},defaultValue:{func:!1,value:"'medium'"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"activeLabel",required:!1,type:{name:"string"}},{name:"activeColor",required:!1,type:{name:"string"}},{name:"inactiveLabel",required:!1,type:{name:"string"}},{name:"inactiveColor",required:!1,type:{name:"string"}},{name:"teleported",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"tagSize",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'}]},defaultValue:{func:!1,value:"'small'"}}],events:[{name:"validate",type:{names:["boolean"]}},{name:"update:modelValue",type:{names:["Validatable"]}},{name:"focus"},{name:"blur"},{name:"enter"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/n8n-storybook/n8n-storybook/packages/design-system/src/components/N8nFormInput/FormInput.vue"]};export{We as E,Ra as N};
